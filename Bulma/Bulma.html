<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chochoo Project</title>
  <link rel="icon" href="../Chocolatta.avif">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet">
  <!-- Bulma CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
  <link href="css/bulma.css" rel="stylesheet">

</head>
<body>
  <!-- Header -->
  <div class="header-bg">
    <div class="header-logo">
      <img src="../Chocolatta.avif" alt="Logo Chocolatta">
    </div>
    <!-- Header curve solo en desktop -->
    <div class="header-curve is-hidden-mobile"></div>
  </div>
  <nav class="navbar custom-sticky-navbar" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">

        <!-- Botón hamburguesa solo en móvil -->
        <a role="button" class="navbar-burger is-hidden-tablet" aria-label="menu" aria-expanded="false" data-target="mainNavbar">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div id="mainNavbar" class="navbar-menu">
        <div class="navbar-start is-flex is-justify-content-center " style="width:100%" ;>
          <a class="navbar-item" href="#inicio" id="link-inicio">Inicio</a>
          <a class="navbar-item" href="#informacion" id="link-informacion">Información</a>
          <a class="navbar-item" href="#compra" id="link-compra">Compra Online</a>
          <a class="navbar-item" href="#pago" id="link-pago">Formas de Pago</a>
          <a class="navbar-item" href="#english" id="link-english">English Menu</a>
          <!-- Más opciones en un dropdown -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link" style="background:var(--vino);color:var(--blanco);font-weight:bold;border-radius:6px;">
              Más
            </a>
            <div class="navbar-dropdown is-right" style="min-width:160px;background:#fff;">
              <a class="navbar-item" href="../index.html" target="_blank" style="color:var(--vino);font-weight:bold;">Bootstrap</a>
              <a class="navbar-item" href="../Materialize/Materialize.html" target="_blank" style="color:var(--vino);font-weight:bold;">Materialize</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Inicio -->
  <section id="inicio" class="section p-0" style="padding-bottom:2rem !important;">
    <div id="carousel" class="mb-4">
      <img id="carousel-img-1" src="../Choco1.avif" alt="Chocolatta" class="carousel-img-active">
      <img id="carousel-img-2" src="../Choco2.avif" alt="Chocolatta" class="carousel-img-next">
    </div>
    <div class="container">
      <p class="inicio-texto">
        La Chocolatta nace como un sueño dulce... sueño de pioneros suizos, que siguiendo los pasos de sus ancestros, con la misma tenacidad y espíritu, decidieron materializar ese sueño: Proporcionar a sus consumidores una variedad de productos frescos y naturales.<br><br>
        Las combinaciones son múltiples y el resultado se traduce en innumerables exquisiteces para el paladar, con ingredientes de la más alta calidad.
      </p>
    </div>
  </section>

  <!-- Información -->
  <section id="informacion" class="section">
    <div class="container">
      <h2 class="title is-3 has-text-centered mb-5">Información</h2>
      <!-- Contacto y Formulario arriba -->
      <div class="columns is-variable is-6 mb-4">
        <!-- Contacto -->
        <div class="column is-5">
          <div class="card h-100">
            <div class="card-content">
              <h3 class="title is-5 has-text-centered mb-3">Contacto</h3>
              <p class="has-text-centered mb-1">Gobernador Carlos Bories #852</p>
              <p class="has-text-centered mb-1">
                <a href="mailto:contacto@chocolatta.cl">contacto@chocolatta.cl</a>
              </p>
              <p class="has-text-centered">612248150</p>
            </div>
          </div>
        </div>
        <!-- Formulario -->
        <div class="column is-7">
          <div class="card h-100">
            <div class="card-content">
              <form id="contactForm">
                <div class="columns is-multiline">
                  <div class="column is-half">
                    <div class="field">
                      <label class="label" for="nombre">Nombre completo:</label>
                      <div class="control">
                        <input class="input" type="text" id="nombre" required>
                      </div>
                    </div>
                  </div>
                  <div class="column is-half">
                    <div class="field">
                      <label class="label" for="email">Correo electrónico:</label>
                      <div class="control">
                        <input class="input" type="email" id="email" required>
                      </div>
                    </div>
                  </div>
                  <div class="column is-half">
                    <div class="field">
                      <label class="label" for="telefono">Teléfono (+56):</label>
                      <div class="control">
                        <input class="input" type="tel" id="telefono" placeholder="+56 9XXXXXXXX" required autocomplete="tel">
                      </div>
                      <p id="alertTelefono" class="help is-danger" style="display:none;">
                        El número no es válido. Debe ser +56 9XXXXXXXX (9 dígitos después de +56).
                      </p>
                    </div>
                  </div>
                  <div class="column is-half">
                    <div class="field">
                      <label class="label" for="edad">Edad:</label>
                      <div class="control">
                        <input class="input" type="number" id="edad" required>
                      </div>
                      <p id="alertEdad" class="help is-danger" style="display:none;">
                        Debes tener al menos 18 años para registrarte.
                      </p>
                    </div>
                  </div>
                  <div class="column is-half">
                    <div class="field">
                      <label class="label" for="usuario">Nombre de usuario:</label>
                      <div class="control">
                        <input class="input" type="text" id="usuario" required>
                      </div>
                      <p id="alertUsuario" class="help is-danger" style="display:none;">
                        El usuario debe tener al menos 4 caracteres.
                      </p>
                    </div>
                  </div>
                  <div class="column is-half">
                    <div class="field">
                      <label class="label" for="contrasena">Contraseña:</label>
                      <div class="control">
                        <input class="input" type="password" id="contrasena" required>
                      </div>
                      <p id="alertContrasena" class="help is-danger" style="display:none;">
                        La contraseña debe tener al menos 6 caracteres y contener al menos un número.
                      </p>
                    </div>
                  </div>
                  <div class="column is-12 has-text-right">
                    <button type="submit" class="button is-primary">Registrarse</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <!-- Mapa, Datos de Transferencia y Horario en una fila -->
      <div class="columns is-variable is-6 mb-4">
        <!-- Mapa -->
        <div class="column is-6">
          <div class="card h-100">
            <div class="card-content">
              <h3 class="title is-5 has-text-centered mb-3">Ubicación</h3>
              <div style="position:relative;width:100%;padding-bottom:56.25%;border-radius:12px;overflow:hidden;">
                <iframe
                  src="https://www.google.com/maps?q=Gobernador+Carlos+Bories+852,+Punta+Arenas,+Chile&output=embed"
                  allowfullscreen
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"
                  style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;border-radius:12px;">
                </iframe>
              </div>
            </div>
          </div>
        </div>
        <!-- Horario y Datos de Transferencia juntos -->
        <div class="column is-6">
          <div class="card h-100">
            <div class="card-content has-text-centered">
              <h3 class="title is-5 mb-3">Horario</h3>
              <div class="columns is-mobile is-vcentered is-centered mb-2">
                <div class="column is-half">Lunes a Viernes</div>
                <div class="column is-half">07:00 - 22:00</div>
              </div>
              <div class="columns is-mobile is-vcentered is-centered mb-3">
                <div class="column is-half">Sábado y Domingo</div>
                <div class="column is-half">09:00 - 22:00</div>
              </div>
              <hr>
              <h3 class="title is-6 mb-2">Datos de Transferencia</h3>
              <p class="mb-1">La Chocolatta Ltda</p>
              <p class="mb-1">77.392.930-0</p>
              <p class="mb-1">Banco de Chile</p>
              <p class="mb-1">Cta Cte 0878896321</p>
              <p>
                <a href="mailto:pagoschocolatta@gmail.com">pagoschocolatta@gmail.com</a>
              </p>
            </div>
          </div>
        </div>
      </div>
      <!-- Video al final -->
      <div class="columns is-centered">
        <div class="column is-10">
          <div class="card">
            <div class="card-content has-text-centered" style="min-height:180px;">
              <div class="w-100 d-flex align-items-center justify-content-center" style="height:315px; background:#eee; border-radius:12px; color:#aaa; font-size:1.1rem;">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/UUhcOPXCLKM?si=TPV11TgHS3S45z_n" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>    
              </div>            
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Compra Online -->
  <section id="compra" class="section" style="background:var(--vino);color:var(--blanco);">
    <div class="container">
      <div id="compra-barra">
        <h2 class="title is-3 has-text-centered" style="color:var(--blanco);user-select:none;cursor:default;">Compra Online</h2>
      </div>
      <div class="has-text-centered">
        <a href="https://toteat.app/r/cl/La-Chocolatta/1822/menu" target="_blank" rel="noopener" style="display:inline-block;">
          <img src="../toteat app logo.avif" alt="Compra Online"
               style="max-width:350px;width:100%;background:#fff;display:inline-block;border-radius:12px;box-shadow:0 2px 8px #0001;">
        </a>
      </div>
    </div>
  </section>

  <!-- Formas de Pago -->
  <section id="pago" class="section">
    <div class="container">
      <div class="columns is-variable is-5">
        <!-- Datos de Transferencia -->
        <div class="column is-6">
          <div class="card">
            <div class="card-content has-text-centered">
              <h3 class="card-title mb-3">Datos de Transferencia</h3>
              <p>La Chocolatta Ltda</p>
              <p>77.392.930-0</p>
              <p>Banco de Chile</p>
              <p>Cta Cte 0878896321</p>
              <p>
                <a href="mailto:pagoschocolatta@gmail.com">pagoschocolatta@gmail.com</a>
              </p>
            </div>
          </div>
        </div>
        <!-- Webpay -->
        <div class="column is-6">
          <div class="card">
            <div class="card-content has-text-centered">
              <h3 class="card-title mb-3">Paga con Webpay</h3>
              <div class="is-flex is-justify-content-center">
                <a href="https://www.webpay.cl/company/34938" target="_blank" rel="noopener">
                  <img src="../webpay-logo.avif" alt="Webpay" style="max-height:180px;max-width:90%;">
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="has-text-centered mt-4">
        <b>Recuerda: Todos los pedidos con delivery deben estar previamente pagados.</b>
      </div>
    </div>
  </section>

  <!-- English Menu -->
  <section id="english" class="section" style="background:var(--vino);color:var(--blanco);">
    <div class="container">
      <h2 class="title is-3 has-text-centered" style="color:var(--blanco);">English Menu</h2>
      <div class="columns is-centered">
        <div class="column is-8 has-text-centered">
          <img src="../EnglishMenu.avif" alt="English Menu"
               class="image is-3by2 mb-3 english-menu-img"
               onclick="openEnglishMenuModal('EnglishMenu.avif')">
          <img src="../EnglishMenu1.avif" alt="English Menu 1"
               class="image is-3by2 mb-3 english-menu-img"
               onclick="openEnglishMenuModal('EnglishMenu1.avif')">
        </div>
      </div>
    </div>
  </section>

  <!-- Modal English Menu -->
  <div id="english-menu-modal">
    <div class="modal-content">
      <img id="english-menu-modal-img" src="" alt="English Menu Zoom">
      <button class="close-btn" onclick="closeEnglishMenuModal()">×</button>
    </div>
  </div>

  <!-- Modal Más Opciones -->
  <div class="modal" id="mas-modal">
    <div class="modal-background"></div>
    <div class="modal-content" style="background:#fff;border-radius:16px;padding:2rem;text-align:center;">
      <h4 class="title is-4">Ver en otro framework</h4>
      <div style="margin-top:2rem;">
        <a href="../index.html" target="_blank" class="button is-primary" style="margin:0 1rem 1rem 0;">Bootstrap</a>
        <a href="../Materialize/Materialize.html" target="_blank" class="button is-primary" style="margin:0 1rem 1rem 0;">Materialize</a>
      </div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
  </div>

  <!-- Footer -->
  <footer>
    <div class="is-flex is-justify-content-center is-align-items-center" style="gap:2rem;flex-wrap:wrap;">
      <a href="https://www.facebook.com/profile.php?id=100063689765303" target="_blank" rel="noopener">
        <svg width="40" height="40" viewBox="0 0 40 40">
          <circle cx="20" cy="20" r="18" fill="#e0e0e0" />
          <text x="20" y="27" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" fill="#6C1F34" font-weight="bold">f</text>
        </svg>
      </a>
      <a href="https://www.instagram.com/chocolatta_baeriswyl/" target="_blank" rel="noopener">
        <svg width="40" height="40" viewBox="0 0 40 40">
          <circle cx="20" cy="20" r="18" fill="#e0e0e0"/>
          <g>
            <rect x="12" y="12" width="16" height="16" rx="5" fill="#6C1F34"/>
            <circle cx="20" cy="20" r="5" fill="#fff"/>
            <circle cx="25" cy="15" r="1.2" fill="#fff"/>
          </g>
        </svg>
      </a>
      <div class="comic-bubble-content">
        <span style="font-weight:bold;">Escríbenos:</span>
        <a href="mailto:contacto@chocolatta.cl">contacto@chocolatta.cl</a>
        <div class="comic-bubble-triangle"></div>
      </div>
    </div>
  </footer>

  <script>
    // Carrusel de imágenes para la sección de inicio
    const carouselImages = [
      '../Choco1.avif',
      '../Choco2.avif'
    ];
    let carouselIndex = 0;
    const img1 = document.getElementById('carousel-img-1');
    const img2 = document.getElementById('carousel-img-2');
    img1.src = carouselImages[0];
    img2.src = carouselImages[1];
    img1.classList.add('carousel-img-active');
    img2.classList.add('carousel-img-next');

    setInterval(() => {
      const nextIndex = (carouselIndex + 1) % carouselImages.length;
      if (carouselIndex % 2 === 0) {
        img2.src = carouselImages[nextIndex];
        img2.classList.add('carousel-img-active');
        img2.classList.remove('carousel-img-next');
        img1.classList.remove('carousel-img-active');
        img1.classList.add('carousel-img-next');
      } else {
        img1.src = carouselImages[nextIndex];
        img1.classList.add('carousel-img-active');
        img1.classList.remove('carousel-img-next');
        img2.classList.remove('carousel-img-active');
        img2.classList.add('carousel-img-next');
      }
      carouselIndex = nextIndex;
    }, 5000);

    // Modal English Menu
    function openEnglishMenuModal(imgSrc) {
      const modal = document.getElementById('english-menu-modal');
      const img = document.getElementById('english-menu-modal-img');
      img.src = imgSrc;
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }
    function closeEnglishMenuModal() {
      document.getElementById('english-menu-modal').style.display = 'none';
      document.body.style.overflow = '';
    }
    window.addEventListener('keydown', function (e) {
      const modal = document.getElementById('english-menu-modal');
      if (modal.style.display === 'flex' && e.key === "Escape") closeEnglishMenuModal();
    });

    // Validación del formulario de contacto
    document.getElementById('contactForm').addEventListener('submit', function (e) {
      let ok = true;
      const tel = document.getElementById('telefono').value.trim();
      const telAlert = document.getElementById('alertTelefono');
      if (!/^\+56\s?9\d{8}$/.test(tel)) {
        telAlert.style.display = 'block';
        ok = false;
      } else {
        telAlert.style.display = 'none';
      }
      // Edad
      const edad = parseInt(document.getElementById('edad').value, 10);
      const edadAlert = document.getElementById('alertEdad');
      if (isNaN(edad) || edad < 18) {
        edadAlert.style.display = 'block';
        ok = false;
      } else {
        edadAlert.style.display = 'none';
      }
      // Usuario
      const usuario = document.getElementById('usuario').value.trim();
      const usuarioAlert = document.getElementById('alertUsuario');
      if (usuario.length < 4) {
        usuarioAlert.style.display = 'block';
        ok = false;
      } else {
        usuarioAlert.style.display = 'none';
      }
      // Contraseña
      const pass = document.getElementById('contrasena').value;
      const passAlert = document.getElementById('alertContrasena');
      if (!/^(?=.*\d).{6,}$/.test(pass)) {
        passAlert.style.display = 'block';
        ok = false;
      } else {
        passAlert.style.display = 'none';
      }
      if (!ok) e.preventDefault();
    });

    // Animación de aparición al hacer scroll
    const sections = document.querySelectorAll('section');
    function revealSectionsOnScroll() {
      const triggerBottom = window.innerHeight * 0.92;
      sections.forEach(section => {
        const sectionTop = section.getBoundingClientRect().top;
        if (sectionTop < triggerBottom) {
          section.classList.add('visible');
        }
      });
    }
    window.addEventListener('scroll', revealSectionsOnScroll);
    window.addEventListener('DOMContentLoaded', revealSectionsOnScroll);

    // Pan (arrastrar) en el modal de English Menu: mouse y touch
    (function() {
      const modalImg = document.getElementById('english-menu-modal-img');
      let isPanning = false, startX = 0, startY = 0, lastX = 0, lastY = 0, scale = 1.8;

      function setTransform() {
        modalImg.style.transform = `scale(${scale}) translate(${lastX/scale}px, ${lastY/scale}px)`;
      }

      // Mouse events
      modalImg.addEventListener('mousedown', function(e) {
        isPanning = true;
        startX = e.clientX - lastX;
        startY = e.clientY - lastY;
        modalImg.style.cursor = "grabbing";
        e.preventDefault();
      });
      document.addEventListener('mousemove', function(e) {
        if (!isPanning) return;
        lastX = e.clientX - startX;
        lastY = e.clientY - startY;
        setTransform();
      });
      document.addEventListener('mouseup', function() {
        isPanning = false;
        modalImg.style.cursor = "grab";
      });

      // Touch events
      modalImg.addEventListener('touchstart', function(e) {
        if (e.touches.length !== 1) return;
        isPanning = true;
        startX = e.touches[0].clientX - lastX;
        startY = e.touches[0].clientY - lastY;
        e.preventDefault();
      }, { passive: false });
      document.addEventListener('touchmove', function(e) {
        if (!isPanning || e.touches.length !== 1) return;
        lastX = e.touches[0].clientX - startX;
        lastY = e.touches[0].clientY - startY;
        setTransform();
      }, { passive: false });
      document.addEventListener('touchend', function() {
        isPanning = false;
      });

      // Zoom al abrir el modal
      const modal = document.getElementById('english-menu-modal');
      function openZoom() {
        lastX = 0; lastY = 0;
        modalImg.style.transition = "transform 0.2s";
        setTransform();
        setTimeout(() => { modalImg.style.transition = ""; }, 250);
      }
      // Detecta apertura del modal
      const observer = new MutationObserver(() => {
        if (modal.style.display === 'flex') openZoom();
      });
      observer.observe(modal, { attributes: true, attributeFilter: ['style'] });

      // Doble click o doble tap para resetear posición
      let lastTap = 0;
      modalImg.addEventListener('dblclick', function() {
        lastX = 0; lastY = 0; setTransform();
      });
      modalImg.addEventListener('touchend', function(e) {
        const now = Date.now();
        if (now - lastTap < 400) { 
          lastX = 0; lastY = 0; setTransform();
        }
        lastTap = now;
      });

      // Cursor visual
      modalImg.style.cursor = "grab";
    })();

    // Scrollspy para Bulma navbar
    document.addEventListener('DOMContentLoaded', function () {
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('.navbar-item');

      function onScroll() {
        let scrollPos = window.scrollY + 130; 
        let currentId = '';
        sections.forEach(section => {
          if (scrollPos >= section.offsetTop) {
            currentId = section.id;
          }
        });
        navLinks.forEach(link => {
          link.classList.remove('is-active');
          if (link.getAttribute('href') === '#' + currentId) {
            link.classList.add('is-active');
          }
        });
      }

      window.addEventListener('scroll', onScroll);
      onScroll(); 
    });

    // Scroll suave con offset para navbar sticky
    document.querySelectorAll('.navbar-item[href^="#"]').forEach(link => {
      link.addEventListener('click', function(e) {
        const targetId = this.getAttribute('href').slice(1);
        const target = document.getElementById(targetId);
        if (target) {
          e.preventDefault();
          const navbar = document.querySelector('.custom-sticky-navbar');
          const navbarHeight = navbar ? navbar.offsetHeight : 80;
          const y = target.getBoundingClientRect().top + window.scrollY - navbarHeight - 16;
          window.scrollTo({ top: y, behavior: 'smooth' });
        }
      });
    });


    document.addEventListener('DOMContentLoaded', function () {
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
      const $navbarMenu = document.getElementById('mainNavbar');

      if ($navbarBurgers.length > 0) {
        $navbarBurgers.forEach(function ($el) {
          $el.addEventListener('click', function () {
            $el.classList.toggle('is-active');
            $navbarMenu.classList.toggle('is-active');
          });
        });
      }

      // Cierra el menú al hacer clic en cualquier enlace del menú (en móvil)
      if ($navbarMenu) {
        $navbarMenu.querySelectorAll('.navbar-item').forEach(function($link) {
          $link.addEventListener('click', function () {
            if (window.innerWidth < 1024) { 
              $navbarMenu.classList.remove('is-active');
              $navbarBurgers.forEach(function ($el) {
                $el.classList.remove('is-active');
              });
            }
          });
        });
      }
    });


  </script>
</body>
</html>